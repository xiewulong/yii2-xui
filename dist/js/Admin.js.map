{"version":3,"sources":["Admin.js"],"names":["$","document","undefined","param","attr","token","csrf","data","jQuery","modal","html","options","extend","backdrop","on","find","focus","remove","$li","parent","hasClass","length","toggleClass","removeClass","parents","children","each","$this","height","$alerts","types","Alert","text","type","delay","init","render","delayClose","$alert","_this","appendTo","close","setTimeout","addClass","timer","clearTimeout","alert","deleted","$modal","id","url","$fieldset","prop","ajax","method","dataType","success","d","error","message","window","location","reload","e","_setData","call","_new","$add","max","$parent","siblings","show","val","prevAll","$hidden","$file","name","get","append","$new","clone","removeAttr","before","hide","isNew","$img","$text","$button","notImg","Tags","obj","$obj","$list","inputTemplate","ids","push","value","events","newInput","$input","originalEvent","keyCode","submit","cancel","press","like","$span","index","indexOf","splice","fadeOut","clearDropdown","selectedId","$target","down","$dropdown","classname","sibling","$selected","$first","select","pressDownIndex","unselect","tags","len","tag","list","css","offset","top","offsetHeight","addById","end","i","exists","current","join","selected","post","inArray","add"],"mappings":"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","file":"Admin.js","sourcesContent":["/*!\n * admin\n * xiewulong <xiewulong@vip.qq.com>\n * create: 2016/8/2\n * version: 0.0.2\n */\n\n// csrf\n(($, document, undefined) => {\n\tlet param\t= $('meta[name=csrf-param]').attr('content'),\n\t\ttoken\t= $('meta[name=csrf-token]').attr('content');\n\n\t$.csrf = (data) => {\n\t\tdata = data || {};\n\t\tdata[param] = token;\n\n\t\treturn data;\n\t};\n\n})(jQuery, document);\n\n// modal\n(($, document, undefined) => {\n\n\t$.modal = (html, options) => {\n\t\t// html sample\n\t\t// '<div class=\"modal fade\">' +\n\t\t// \t'<div class=\"modal-dialog\">' +\n\t\t// \t\t'<div class=\"modal-content\">' +\n\t\t// \t\t\t'<div class=\"modal-header\">' +\n\t\t// \t\t\t\t'<button type=\"button\" class=\"close\" data-dismiss=\"modal\" aria-label=\"Close\"><span aria-hidden=\"true\">&times;</span></button>' +\n\t\t// \t\t\t\t'<h4 class=\"modal-title\">Modal title</h4>' +\n\t\t// \t\t\t'</div>' +\n\t\t// \t\t\t'<div class=\"modal-body\">' +\n\t\t// \t\t\t\t'<p>One fine body&hellip;</p>' +\n\t\t// \t\t\t'</div>' +\n\t\t// \t\t\t'<div class=\"modal-footer\">' +\n\t\t// \t\t\t\t'<button type=\"button\" class=\"btn btn-default\" data-dismiss=\"modal\">Close</button>' +\n\t\t// \t\t\t\t'<button type=\"button\" class=\"btn btn-primary\">Save changes</button>' +\n\t\t// \t\t\t'</div>' +\n\t\t// \t\t'</div>' +\n\t\t// \t'</div>' +\n\t\t// '</div>';\n\n\t\treturn $(html).modal($.extend({backdrop: 'static'}, options)).on('shown.bs.modal', function() {\n\t\t\t$(this).find('[autofocus=autofocus]').focus();\n\t\t}).on('hidden.bs.modal', function() {\n\t\t\t$(this).remove();\n\t\t});\n\t};\n\n})(jQuery, document);\n\n// dropdown\n(($, document, undefined) => {\n\n\t$(document).on('click', '.J-admin-header .menu > ul.main > li > .text', function() {\n\t\tlet $li\t= $(this).parent('li');\n\n\t\tif(!$li.hasClass('dropdown-hover') && $li.find('ul.dropdown, ul.dropdown-mixed').length) {\n\t\t\t$li.toggleClass('dropdown-open');\n\n\t\t\treturn false;\n\t\t}\n\t}).on('click', function() {\n\t\t$('.J-admin-header .menu > ul.main > li.dropdown-open').removeClass('dropdown-open');\n\t});\n\n})(jQuery, document);\n\n// sidebar\n(($, document, undefined) => {\n\n\t$(document).on('click', '.J-admin-sidebar .sidebar-control', function() {\n\t\t$(this).parents('.J-admin-sidebar').toggleClass('admin-sidebar-fold');\n\t}).on('click', '.J-admin-sidebar ul.sidebar > li > .text', function() {\n\t\tlet $li\t= $(this).parent('li');\n\n\t\t$li.children('ul.children').length && $li.toggleClass('fold');\n\t});\n\n\t$('.J-admin-sidebar ul.sidebar > li > ul.children').each(function() {\n\t\tlet $this = $(this);\n\n\t\t$this.height($this.height());\n\t});\n\n})(jQuery, document);\n\n// alert\n(($, document, undefined) => {\n\tlet $alerts\t= $('.J-admin-alerts'),\n\t\ttypes\t= ['success', 'danger', 'info', 'warning'];\n\n\tclass Alert {\n\n\t\tconstructor(text, type, delay = 3000) {\n\t\t\tthis.text = text;\n\t\t\tthis.type = types[type];\n\t\t\tthis.delay = delay;\n\n\t\t\treturn this.init();\n\t\t}\n\n\t\tinit() {\n\t\t\tthis.render();\n\t\t\tthis.delayClose();\n\n\t\t\treturn this.$alert;\n\t\t}\n\n\t\trender() {\n\t\t\tlet _this\t= this;\n\n\t\t\tthis.$alert = $(\t'<div class=\"alert alert-' + this.type + ' alert-dismissible\">' +\n\t\t\t\t\t\t\t\t\t'<button type=\"button\" class=\"close\"><span>&times;</span></button>' +\n\t\t\t\t\t\t\t\t\tthis.text +\n\t\t\t\t\t\t\t\t'</div>').appendTo($alerts)\n\t\t\t\t.on('click', '.close', function() {\n\t\t\t\t\t_this.close();\n\t\t\t\t}).on('webkitTransitionend transitionend', function() {\n\t\t\t\t\t!_this.$alert.hasClass('alert-show') && _this.remove();\n\t\t\t\t});\n\n\t\t\tsetTimeout(() => {\n\t\t\t\tthis.$alert.addClass('alert-show');\n\t\t\t}, 0);\n\t\t}\n\n\t\tdelayClose() {\n\t\t\tthis.timer = setTimeout(() => {\n\t\t\t\tthis.close();\n\t\t\t}, this.delay);\n\t\t}\n\n\t\tclose() {\n\t\t\tclearTimeout(this.timer);\n\t\t\tthis.$alert.removeClass('alert-show');\n\t\t}\n\n\t\tremove() {\n\t\t\tthis.$alert.remove();\n\t\t}\n\n\t}\n\n\t$.alert = function(text, type, delay) {\n\t\tif(type === undefined || type === true) {\n\t\t\ttype = 1;\n\t\t} else if(type === false) {\n\t\t\ttype = 0;\n\t\t}\n\n\t\treturn new Alert(text, type, delay);\n\t}\n\n})(jQuery, document);\n\n// delete modal\n(($, document, undefined) => {\n\n\t$(document).on('click', '[data-delete]', function() {\n\t\tlet deleted, $modal,\n\t\t\t$this\t= $(this),\n\t\t\tid\t\t= $this.attr('data-delete'),\n\t\t\turl\t\t= $this.attr('href') || $this.attr('data-url');\n\n\t\tif(!id || !url) return;\n\n\t\t$modal = $.modal(\t'<div class=\"modal fade\">' +\n\t\t\t\t\t\t\t\t'<div class=\"modal-dialog\">' +\n\t\t\t\t\t\t\t\t\t'<form class=\"modal-content\">' +\n\t\t\t\t\t\t\t\t\t\t'<fieldsed>' +\n\t\t\t\t\t\t\t\t\t\t\t'<div class=\"modal-header\">' +\n\t\t\t\t\t\t\t\t\t\t\t\t'<button type=\"button\" class=\"close\" data-dismiss=\"modal\" aria-label=\"Close\"><span aria-hidden=\"true\">&times;</span></button>' +\n\t\t\t\t\t\t\t\t\t\t\t\t'<h5 class=\"modal-title\">删除提示</h5>' +\n\t\t\t\t\t\t\t\t\t\t\t'</div>' +\n\t\t\t\t\t\t\t\t\t\t\t'<div class=\"modal-body\">' +\n\t\t\t\t\t\t\t\t\t\t\t\t'<p>您确定要删除吗？</p>' +\n\t\t\t\t\t\t\t\t\t\t\t'</div>' +\n\t\t\t\t\t\t\t\t\t\t\t'<div class=\"modal-footer\">' +\n\t\t\t\t\t\t\t\t\t\t\t\t'<button type=\"button\" class=\"btn btn-default\" data-dismiss=\"modal\">取消</button>' +\n\t\t\t\t\t\t\t\t\t\t\t\t'<button type=\"submit\" class=\"btn btn-primary\">确定</button>' +\n\t\t\t\t\t\t\t\t\t\t\t'</div>' +\n\t\t\t\t\t\t\t\t\t\t'</fieldsed>' +\n\t\t\t\t\t\t\t\t\t'</form>' +\n\t\t\t\t\t\t\t\t'</div>' +\n\t\t\t\t\t\t\t'</div>');\n\n\t\t$modal.on('submit', 'form', function() {\n\t\t\tlet $fieldset\t= $(this).find('fieldset').prop('disabled', true);\n\n\t\t\t$.ajax({\n\t\t\t\turl: url,\n\t\t\t\tdata: $.csrf({id: id}),\n\t\t\t\tmethod: 'post',\n\t\t\t\tdataType: 'json',\n\t\t\t\tsuccess: (d) => {\n\t\t\t\t\tif(!d.error) {\n\t\t\t\t\t\tdeleted = true;\n\t\t\t\t\t}\n\t\t\t\t\t$modal.modal('hide');\n\t\t\t\t\t$.alert(d.message, d.error);\n\t\t\t\t}\n\t\t\t});\n\n\t\t\treturn false;\n\t\t}).on('hidden.bs.modal', function() {\n\t\t\tdeleted && window.location.reload();\n\t\t});\n\n\t\treturn false;\n\t});\n\n})(jQuery, document);\n\n// attachment upload\n(($, document, undefined) => {\n\n\t$(document).on('uploaded.attachment.file', '.J-admin-attachment input[type=file]', function(e, d) {\n\t\tif(d.error) {\n\t\t\t$.alert(d.message);\n\n\t\t\treturn false;\n\t\t}\n\n\t\t$(this).parent().attr('data-attachment-max') === undefined ? _setData.call(this, d.data) : _new.call(this, d.data);\n\t\t$.alert(d.message, d.error);\n\t}).on('click', '.J-admin-attachment i', function() {\n\t\tlet $add, max,\n\t\t\t$parent\t= $(this).parent();\n\n\t\tif($parent.hasClass('admin-attachments')) {\n\t\t\t$add = $parent.siblings('[data-attachment-max]');\n\t\t\tmax = + $add.attr('data-attachment-max');\n\t\t\tmax > 0 && $parent.siblings('.admin-attachments').length < max && $add.show();\n\t\t\t$parent.remove();\n\n\t\t\treturn false;\n\t\t}\n\n\t\t$parent.find('input[type=hidden]').val('');\n\t\t$parent.find('img, i, p').remove();\n\t}).on('click', '[data-attachment-max]', function() {\n\t\tlet $this\t= $(this),\n\t\t\tmax\t\t= + $this.attr('data-attachment-max');\n\n\t\tif(max > 0 && $this.prevAll('.admin-attachments').length >= max) {\n\t\t\t$.alert('最多只能添加' + max + '张图片', 3);\n\n\t\t\treturn false;\n\t\t}\n\t});\n\n\t$('.J-admin-attachment').each(function() {\n\t\tlet $this\t= $(this),\n\t\t\t$hidden\t= $this.find('input[type=hidden]'),\n\t\t\t$file\t= $this.find('input[type=file]'),\n\t\t\tdata\t= {id: $hidden.val(), name: $hidden.attr('data-name')};\n\n\t\tdata.id && _setData.call($file.get(0), data);\n\t\t$this.hasClass('admin-attachment-name') && $this.append('<a href=\"javascript:;\">点击上传文件</a>');\n\t});\n\n\tfunction _new(data) {\n\t\tlet $this\t= $(this),\n\t\t\t$parent\t= $this.parent(),\n\t\t\tmax\t\t= + $parent.attr('data-attachment-max'),\n\t\t\t$new \t= $parent.clone().removeAttr('data-attachment-max').removeClass('glyphicon-plus').addClass('glyphicon-picture admin-attachments');\n\n\t\t_setData.call($new.find('input[type=file]').get(0), data, true);\n\t\t$parent.before($new);\n\t\tmax > 0 && $parent.siblings('.admin-attachments').length >= max && $parent.hide();\n\t}\n\n\tfunction _setData(data, isNew) {\n\t\tlet $this\t\t= $(this),\n\t\t\t$parent\t\t= $this.parent(),\n\t\t\t$hidden\t\t= $parent.find('input[type=hidden]'),\n\t\t\t$img\t\t= $parent.find('img'),\n\t\t\t$text\t\t= $parent.find('p'),\n\t\t\t$button\t\t= $parent.find('a'),\n\t\t\tnotImg\t\t= $parent.hasClass('admin-attachment-name');\n\n\t\tif(!$hidden.length) {\n\t\t\t$hidden = $('<input type=\"hidden\" name=\"' + $this.attr('data-attachment-upload') + '\" />').appendTo($parent);\n\t\t}\n\t\tif(!notImg && !$img.length) {\n\t\t\t$img = $('<img />').appendTo($parent);\n\t\t}\n\t\tif(!$parent.find('i').length) {\n\t\t\t$parent.append('<i class=\"glyphicon glyphicon-remove\"></i>');\n\t\t}\n\t\tif(notImg && !$text.length) {\n\t\t\t$text = $('<p></p>').appendTo($parent);\n\t\t}\n\t\t$hidden.val(data.id);\n\t\tif(notImg) {\n\t\t\t$hidden.attr('data-name', data.name);\n\t\t\t$text.html(data.name);\n\t\t} else {\n\t\t\t$img.attr('src', $this.attr('data-attachment-load-action') + '?id=' + data.id);\n\t\t}\n\t\tisNew && $this.remove();\n\t}\n\n})(jQuery, document);\n\n// tags\n(($, document, undefined) => {\n\n\tclass Tags {\n\n\t\tconstructor(obj) {\n\t\t\tthis.$obj = $(obj);\n\t\t\tthis.$list = this.$obj.find('p');\n\t\t\tthis.$new = this.$obj.find('.new');\n\t\t\tthis.$button = this.$new.find('button');\n\t\t\tthis.url = this.$obj.attr('data-tags');\n\t\t\tthis.name = this.$button.attr('data-tag-name');\n\t\t\tthis.inputTemplate = '<input type=\"text\" class=\"form-control\" placeholder=\"请输入标签名\" />';\n\t\t\tthis.ids = (() => {\n\t\t\t\tlet ids = [];\n\t\t\t\tthis.$list.find('span input[type=hidden]').each(function() {\n\t\t\t\t\tids.push(+ this.value);\n\t\t\t\t});\n\n\t\t\t\treturn ids;\n\t\t\t})();\n\n\t\t\tthis.events();\n\t\t}\n\n\t\tevents() {\n\t\t\tlet _this = this;\n\t\t\tthis.$obj.on('click', '.new button', () => {\n\t\t\t\tthis.newInput();\n\t\t\t\tthis.$button.hide();\n\t\t\t\tthis.$input.appendTo(this.$new).focus();\n\t\t\t}).on('keydown', '.new input', (e) => {\n\t\t\t\tswitch(e.originalEvent.keyCode) {\n\t\t\t\t\tcase 13:\n\t\t\t\t\t\treturn this.submit();\n\t\t\t\t\t\tbreak;\n\t\t\t\t\tcase 27:\n\t\t\t\t\t\tthis.cancel();\n\t\t\t\t\t\tbreak;\n\t\t\t\t\tcase 38:\n\t\t\t\t\t\tthis.press(false);\n\t\t\t\t\t\tbreak;\n\t\t\t\t\tcase 40:\n\t\t\t\t\t\tthis.press(true);\n\t\t\t\t\t\tbreak;\n\t\t\t\t}\n\t\t\t}).on('focus input', '.new input', () => {\n\t\t\t\tthis.like();\n\t\t\t}).on('click', 'p span i', function() {\n\t\t\t\tlet $span\t= $(this).parent('span'),\n\t\t\t\t\tindex\t= _this.ids.indexOf(+ $span.find('input[type=hidden]').val());\n\n\t\t\t\tindex >= 0 && _this.ids.splice(index, 1);\n\n\t\t\t\t$span.fadeOut(function() {\n\t\t\t\t\t$span.remove();\n\t\t\t\t});\n\t\t\t});\n\n\t\t\t$(document).on('click', () => {\n\t\t\t\tthis.clearDropdown();\n\t\t\t});\n\t\t}\n\n\t\tunselect() {\n\t\t\tthis.selectedId = null;\n\t\t}\n\n\t\tselect($target) {\n\t\t\tthis.selectedId = $target.addClass('selected').attr('data-id');\n\t\t}\n\n\t\tpress(down) {\n\t\t\tif(!this.$dropdown) return;\n\n\t\t\tlet $target,\n\t\t\t\tclassname\t= 'selected',\n\t\t\t\tsibling\t\t= down ? 'next' : 'prev',\n\t\t\t\t$selected\t= this.$dropdown.find('li.' + classname),\n\t\t\t\t$first\t\t= this.$dropdown.find('li:' + (down ? 'first' : 'last'));\n\n\t\t\tif($selected.length) {\n\t\t\t\t$selected.removeClass(classname);\n\n\t\t\t\tif($selected[sibling]('li').length) {\n\t\t\t\t\t$target = $selected[sibling]('li');\n\t\t\t\t} else {\n\t\t\t\t\t$target = $first;\n\t\t\t\t}\n\t\t\t} else {\n\t\t\t\t$target = $first;\n\t\t\t}\n\n\t\t\tthis.select($target);\n\t\t}\n\n\t\tclearDropdown() {\n\t\t\tif(!this.$dropdown) return;\n\n\t\t\tthis.$dropdown.remove();\n\t\t\tthis.$dropdown = null;\n\t\t\tthis.pressDownIndex = 0;\n\t\t\tthis.unselect();\n\t\t}\n\n\t\tdropdown(tags) {\n\t\t\tlet len = tags.length;\n\n\t\t\tif(!len) {\n\t\t\t\tthis.clearDropdown();\n\n\t\t\t\treturn;\n\t\t\t}\n\n\t\t\tthis.unselect();\n\n\t\t\tlet tag,\n\t\t\t\tlist\t= [],\n\t\t\t\tcss\t\t= this.$input.offset(),\n\t\t\t\tvalue\t= this.$input.val(),\n\t\t\t\t_this\t= this;\n\n\t\t\tcss.top += this.$input.get(0).offsetHeight;\n\n\t\t\tthis.$dropdown = this.$dropdown || $('<ul class=\"admin-tags-like-list\">').appendTo('body').on('click', 'li', function() {\n\t\t\t\t_this.addById($(this).attr('data-id'));\n\t\t\t}).on('mouseenter', 'li', function() {\n\t\t\t\t_this.selectedId = $(this).addClass('selected').siblings('.selected').removeClass('selected').end().attr('data-id');\n\t\t\t});\n\t\t\tthis.$dropdown.css(css);\n\n\t\t\tthis.tags = {};\n\n\t\t\tfor(let i = 0; i < len; i++) {\n\t\t\t\ttag = tags[i];\n\t\t\t\tif(this.exists(tag.id)) continue;\n\t\t\t\tlet current = tag.name == value;\n\t\t\t\tlist.push('<li data-id=\"' + tag.id + '\"' + (current ? ' class=\"selected\"' : null) + '>' + tag.name + '</li>');\n\t\t\t\tthis.tags[tag.id] = tag;\n\t\t\t\tif(current) {\n\t\t\t\t\tthis.selectedId = tag.id;\n\t\t\t\t}\n\t\t\t}\n\n\t\t\tthis.$dropdown.html(list.join(''));\n\t\t}\n\n\t\tlike() {\n\t\t\tthis.selected = null;\n\n\t\t\tthis.$input.val() ? this.post(true) : this.clearDropdown();\n\t\t}\n\n\t\tadd(tag) {\n\t\t\tif(this.exists(tag.id)) {\n\t\t\t\tthis.$input.prop('disabled', false);\n\t\t\t\t$.alert('标签已添加', 3);\n\n\t\t\t\treturn;\n\t\t\t}\n\n\t\t\tthis.ids.push(tag.id);\n\t\t\tthis.$list.append(\t'<span>' +\n\t\t\t\t\t\t\t\t\t'<input type=\"hidden\" name=\"' + this.name + '\" value=\"' + tag.id + '\" />\\n' +\n\t\t\t\t\t\t\t\t\t'<strong>' + tag.name + '</strong>\\n' +\n\t\t\t\t\t\t\t\t\t'<i class=\"glyphicon glyphicon-remove\"></i>\\n' +\n\t\t\t\t\t\t\t\t'</span>');\n\t\t\tthis.cancel();\n\t\t}\n\n\t\texists(id) {\n\t\t\treturn $.inArray(id, this.ids) >= 0;\n\t\t}\n\n\t\taddById(id) {\n\t\t\tthis.tags[id] && this.add(this.tags[id]);\n\t\t}\n\n\t\tsubmit() {\n\t\t\tif(this.selectedId) {\n\t\t\t\tthis.addById(this.selectedId);\n\t\t\t} else if(this.$input.val()) {\n\t\t\t\tthis.$input.prop('disabled', true);\n\t\t\t\tthis.post();\n\t\t\t} else {\n\t\t\t\t$.alert('请输入标签名', 3);\n\t\t\t}\n\n\t\t\treturn false;\n\t\t}\n\n\t\tcancel() {\n\t\t\tthis.$input.remove();\n\t\t\tthis.$button.show();\n\t\t\tthis.clearDropdown();\n\t\t}\n\n\t\tnewInput() {\n\t\t\tthis.$input = $(this.inputTemplate);\n\t\t}\n\n\t\tpost(like) {\n\t\t\t$.ajax({\n\t\t\t\turl: this.url,\n\t\t\t\tdata: $.csrf({\n\t\t\t\t\tname: this.$input.val(),\n\t\t\t\t\tlike: like,\n\t\t\t\t}),\n\t\t\t\tmethod: 'post',\n\t\t\t\tdataType: 'json',\n\t\t\t\tsuccess: (d) => {\n\t\t\t\t\tif(d.error) {\n\t\t\t\t\t\treturn;\n\t\t\t\t\t}\n\t\t\t\t\tthis[like ? 'dropdown' : 'add'](d.data);\n\t\t\t\t},\n\t\t\t});\n\t\t}\n\n\t}\n\n\t$('[data-tags]').each(function() {\n\t\tnew Tags(this);\n\t});\n\n})(jQuery, document);\n"],"sourceRoot":"/source/"}