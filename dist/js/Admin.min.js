"use strict";function _classCallCheck(t,a){if(!(t instanceof a))throw new TypeError("Cannot call a class as a function")}var _createClass=function(){function t(t,a){for(var e=0;e<a.length;e++){var n=a[e];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,n.key,n)}}return function(a,e,n){return e&&t(a.prototype,e),n&&t(a,n),a}}();!function(t,a,e){var n=t("meta[name=csrf-param]").attr("content"),i=t("meta[name=csrf-token]").attr("content");t.csrf=function(t){return t=t||{},t[n]=i,t}}(jQuery,document),function(t,a,e){t.modal=function(a,e){return t(a).modal(t.extend({backdrop:"static"},e)).on("shown.bs.modal",function(){t(this).find("[autofocus=autofocus]").focus()}).on("hidden.bs.modal",function(){t(this).remove()})}}(jQuery,document),function(t,a,e){t(a).on("click",".J-admin-header .menu > ul.main > li > .text",function(){var a=t(this).parent("li");if(!a.hasClass("dropdown-hover")&&a.find("ul.dropdown, ul.dropdown-mixed").length)return a.toggleClass("dropdown-open"),!1}).on("click",function(){t(".J-admin-header .menu > ul.main > li.dropdown-open").removeClass("dropdown-open")})}(jQuery,document),function(t,a,e){t(a).on("click",".J-admin-sidebar .sidebar-control",function(){t(this).parents(".J-admin-sidebar").toggleClass("admin-sidebar-fold")}).on("click",".J-admin-sidebar ul.sidebar > li > .text",function(){var a=t(this).parent("li");a.children("ul.children").length&&a.toggleClass("fold")}),t(".J-admin-sidebar ul.sidebar > li > ul.children").each(function(){var a=t(this);a.height(a.height())})}(jQuery,document),function(t,a,e){var n=t(".J-admin-alerts"),i=["success","danger","info","warning"],o=function(){function a(t,n){var o=arguments.length<=2||arguments[2]===e?3e3:arguments[2];return _classCallCheck(this,a),this.text=t,this.type=i[n],this.delay=o,this.init()}return _createClass(a,[{key:"init",value:function(){return this.render(),this.delayClose(),this.$alert}},{key:"render",value:function(){var a=this,e=this;this.$alert=t('<div class="alert alert-'+this.type+' alert-dismissible"><button type="button" class="close"><span>&times;</span></button>'+this.text+"</div>").appendTo(n).on("click",".close",function(){e.close()}).on("webkitTransitionend transitionend",function(){!e.$alert.hasClass("alert-show")&&e.remove()}),setTimeout(function(){a.$alert.addClass("alert-show")},0)}},{key:"delayClose",value:function(){var t=this;this.timer=setTimeout(function(){t.close()},this.delay)}},{key:"close",value:function(){clearTimeout(this.timer),this.$alert.removeClass("alert-show")}},{key:"remove",value:function(){this.$alert.remove()}}]),a}();t.alert=function(t,a,n){return a===e||a===!0?a=1:a===!1&&(a=0),new o(t,a,n)}}(jQuery,document),function(t,a,e){t(a).on("click","[data-delete]",function(){var a=void 0,e=void 0,n=t(this),i=n.attr("data-delete"),o=n.attr("href")||n.attr("data-url");if(i&&o)return e=t.modal('<div class="modal fade"><div class="modal-dialog"><form class="modal-content"><fieldsed><div class="modal-header"><button type="button" class="close" data-dismiss="modal" aria-label="Close"><span aria-hidden="true">&times;</span></button><h5 class="modal-title">删除提示</h5></div><div class="modal-body"><p>您确定要删除吗？</p></div><div class="modal-footer"><button type="button" class="btn btn-default" data-dismiss="modal">取消</button><button type="submit" class="btn btn-primary">确定</button></div></fieldsed></form></div></div>'),e.on("submit","form",function(){t(this).find("fieldset").prop("disabled",!0);return t.ajax({url:o,data:t.csrf({id:i}),method:"post",dataType:"json",success:function(n){n.error||(a=!0),e.modal("hide"),t.alert(n.message,n.error)}}),!1}).on("hidden.bs.modal",function(){a&&window.location.reload()}),!1})}(jQuery,document),function(t,a,e){function n(a){var e=t(this),n=e.parent(),o=+n.attr("data-attachment-max");$new=n.clone().removeAttr("data-attachment-max").removeClass("glyphicon-plus").addClass("glyphicon-picture admin-attachments"),i.call($new.find("input[type=file]").get(0),a,!0),n.before($new),o>0&&n.siblings(".admin-attachments").length>=o&&n.hide()}function i(a,e){var n=t(this),i=n.parent(),o=i.find("input[type=hidden]"),s=i.find("img"),r=i.find("p"),d=(i.find("a"),i.hasClass("admin-attachment-name"));o.length||(o=t('<input type="hidden" name="'+n.attr("data-attachment-upload")+'" />').appendTo(i)),d||s.length||(s=t("<img />").appendTo(i)),i.find("i").length||i.append('<i class="glyphicon glyphicon-remove"></i>'),d&&!r.length&&(r=t("<p></p>").appendTo(i)),o.val(a.id),d?(o.attr("data-name",a.name),r.html(a.name)):s.attr("src",n.attr("data-attachment-load-action")+"?id="+a.id),e&&n.remove()}t(a).on("uploaded.attachment.file",".J-admin-attachment input[type=file]",function(a,o){return o.error?(t.alert(o.message),!1):(t(this).parent().attr("data-attachment-max")===e?i.call(this,o.data):n.call(this,o.data),void t.alert(o.message,o.error))}).on("click",".J-admin-attachment i",function(){var a=void 0,e=void 0,n=t(this).parent();return n.hasClass("admin-attachments")?(a=n.siblings("[data-attachment-max]"),e=+a.attr("data-attachment-max"),e>0&&n.siblings(".admin-attachments").length<e&&a.show(),n.remove(),!1):(n.find("input[type=hidden]").val(""),void n.find("img, i, p").remove())}).on("click","[data-attachment-max]",function(){var a=t(this),e=+a.attr("data-attachment-max");if(e>0&&a.prevAll(".admin-attachments").length>=e)return t.alert("最多只能添加"+e+"张图片",3),!1}),t(".J-admin-attachment").each(function(){var a=t(this),e=a.find("input[type=hidden]"),n=a.find("input[type=file]"),o={id:e.val(),name:e.attr("data-name")};o.id&&i.call(n.get(0),o),a.hasClass("admin-attachment-name")&&a.append('<a href="javascript:;">点击上传文件</a>')})}(jQuery,document);
//# sourceMappingURL=Admin.min.js.map
